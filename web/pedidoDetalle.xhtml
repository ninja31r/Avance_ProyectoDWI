<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<h:head>
    <title>Detalle de Pedido</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"/>
</h:head>
<h:body>
    <ui:include src="/components/layout/header.xhtml" />

    <ui:composition>
        <div class="container py-4">
            <h2>Detalle del pedido #{pedidosBean.pedidoSeleccionado.id}</h2>
            <div class="row">
                <div class="col-md-6">
                    <strong>Cliente:</strong> #{pedidosBean.pedidoSeleccionado.clienteNombre}<br/>
                    <strong>Fecha:</strong> #{pedidosBean.pedidoSeleccionado.fecha}<br/>
                    <strong>Estado:</strong> #{pedidosBean.pedidoSeleccionado.estado}<br/>
                </div>
                <div class="col-md-6 text-end">
                    <h:commandButton value="Imprimir" action="#{pedidosBean.imprimirPedido}" styleClass="btn btn-sm btn-outline-secondary"/>
                </div>
            </div>
            <hr/>
            <h4>Items</h4>
            <div class="table-responsive">
                <table class="table">
                    <thead><tr><th>Item</th><th>Tipo</th><th>Cantidad</th><th>Precio</th><th>Subtotal</th></tr></thead>
                    <tbody>
                        <ui:repeat value="#{pedidosBean.pedidoSeleccionado.lineas}" var="l">
                            <tr>
                                <td>#{l.nombre}</td>
                                <td>#{l.tipo}</td>
                                <td>#{l.cantidad}</td>
                                <td>#{l.precio}</td>
                                <td>#{l.subtotal}</td>
                            </tr>
                        </ui:repeat>
                    </tbody>
                </table>
            </div>
            <div class="text-end">
                <strong>Subtotal:</strong> #{pedidosBean.pedidoSeleccionado.subtotal} <br/>
                <strong>IGV:</strong> #{pedidosBean.pedidoSeleccionado.igv} <br/>
                <strong>Total:</strong> #{pedidosBean.pedidoSeleccionado.total} <br/>
            </div>
        </div>
    </ui:composition>
</h:body>
</html>
